kind: BuildPlan
apiVersion: v1alpha5
metadata:
  name: my-app
  labels:
    app: myapp137
    cluster: prod9-management
    customer: customer-zzsbbmfc
  annotations:
    app.holos.run/description: my-app for customer-zzsbbmfc cluster prod9-management
spec:
  artifacts:
    - artifact: clusters/prod9-management/customers/customer-zzsbbmfc/components/my-app/my-app.gen.yaml
      generators:
        - kind: Helm
          output: helm.gen.yaml
          helm:
            chart:
              name: my-app
              version: 0.1.0
              release: my-app
              repository:
                name: my-app
                url: https://chart.holos.example/my-app
            values:
              accountID: 751237658348
              arn: arn:partition:service:region:account-id:etlwtwvi
              clientID: https://luiqneobvw.example
              cores: 37.3
              customerID: customer-zzsbbmfc
              domain: gzyfnywsic.example
              enabled: false
              image: oci://example.com/espfwpgu
              issuer: https://cglabvwppp.example
              labels:
                label1: hxqjehbohozr
                label2: lytdqukfawqb
                label4: liwcndftvgmk
                label5: smwvgcitfluw
                label6: yoreqectsias
                label7: hickvgmjamwc
                label9: auzshrsnitlr
                label10: njmzitgmbexp
              memory: 4026
              projectID: my-project-581043
              replicas: 12
              version: v11.17.85
        - kind: Resources
          output: resources.gen.yaml
      transformers:
        - kind: Kustomize
          inputs:
            - helm.gen.yaml
            - resources.gen.yaml
          output: clusters/prod9-management/customers/customer-zzsbbmfc/components/my-app/my-app.gen.yaml
          kustomize:
            kustomization:
              apiVersion: kustomize.config.k8s.io/v1beta1
              kind: Kustomization
              labels:
                - includeSelectors: false
                  pairs:
                    argocd.argoproj.io/instance: customer-zzsbbmfc-myapp137-prod9-management
              resources:
                - helm.gen.yaml
                - resources.gen.yaml
    - artifact: apps/customer-zzsbbmfc-myapp137-prod9-management-application.gen.yaml
      generators:
        - kind: Resources
          output: apps/customer-zzsbbmfc-myapp137-prod9-management-application.gen.yaml
          resources:
            Application:
              customer-zzsbbmfc-myapp137-prod9-management:
                apiVersion: argoproj.io/v1alpha1
                kind: Application
                metadata:
                  labels:
                    env: prod
                  name: customer-zzsbbmfc-myapp137-prod9-management
                  namespace: argocd
                spec:
                  destination:
                    server: https://kubernetes.default.svc
                  project: default
                  source:
                    path: deploy/clusters/prod9-management/customers/customer-zzsbbmfc/components/my-app
                    repoURL: https://github.com/holos-run/multi-sources-example.git
                    targetRevision: main
